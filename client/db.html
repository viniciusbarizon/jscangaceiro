<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>Learning IndexedDB</title>
    </head>

    <body>
        <script>
            const openRequest = indexedDB.open("jscangaceiro", 2);

            // dealing with the triad of events!
            openRequest.onupgradeneeded = e => {
                console.log('Create a new database or update an existing database.');

                // IDBDatabase instance.
                connection = e.target.result;

                if(connection.objectStoreNames.contains('tradings')) {
                    connection.deleteObjectStore('tradings');
                }

                connection.createObjectStore('tradings', { autoincrement: true });
            };

            openRequest.onsuccess = e => {
                console.log('Connection successed!');

                // IDBDatabase instance.
                connection = e.target.result;
            };

            openRequest.onerror = e => {
                console.log(e.target.error);
            }
        </script>
    </body>
</html>